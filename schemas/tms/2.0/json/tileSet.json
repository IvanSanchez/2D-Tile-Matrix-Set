{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Tile Set Metadata",
	"description": "A resource describing a tileset based on the OGC TileSet Metadata Standard",
	"allOf": 
	[
		{
			"type": "object",
			"properties":
			{
				"title":
				{
					"description": "A title for this tileset",
					"type": "string"
				},
				"abstract":
				{
					"description": "Brief narrative description of this tile set",
					"type": "string"
				},
				"keywords":
				{
					"description": "keywords about this tileset",
					"type": "array",
					"items":
					{
						"$ref": "../../../ogcapi/common/part1/1.0/schemas/keyword.json"
					} 
				},
				"version": 
				{
					"description": "Version of the Tile Set. Changes if the data behind the tiles has been changed",
					"type": "string"
				},
				"pointOfContact": 
				{
					"description": "Useful information to contact the authors or custodians for the Tile Set",
					"type": "string"
				},
				"accessConstraints": 
				{
					"description": "Restrictions on the availability of the Tile Set that the user needs to be aware of before using or redistributing the Tile Set",
					"type": "string"
				},
				"mediaType": 
				{
					"description": "Media types available for the tiles",
					"type": "string"
				},
				"tileMatrixSetLimits":
				{
					"minItems": 1,
					"type": "array",
					"items":
					{
						"$ref": "tilematrixlimits.json"
					}
				},
				"boundingBox":
				{
					"description": "Minimum bounding rectangle surrounding the tile matrix set, in the supported CRS",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/boundingBox.json"
				},
				"date":
				{
					"$ref": "#/definitions/dates"
				},		
				"layers":
				{
					"minItems": 1,
					"type": "array",
					"items":
					{
						"$ref": "#/definitions/geospatialData"
					}
				},
				"centerPoint":
				{
					"$ref": "#/definitions/tilePoint"
				},
				"links":
				{
					"description": "Links to related resources. Possible link 'rel' values are: 'dataset' for a URL pointing to the dataset, 'tiles' for a URL template to get the tiles. 'alternate' for a URL pointing to another representation of the TileSetMetadata (e.g a TileJSON file)",
					"type": "array",
					"items": {
						"$ref": "../../../ogcapi/common/part1/1.0/schemas/link.json"
					}
				}
			}
		},
		{
			"anyOf": [
				{
					"type": "object",
					"required": ["tileMatrixSet"],
					"properties":
					{
						"tileMatrixSet":
						{
							"description": "Tile matrix set definition",
							"$ref": "tileMatrixSet.json"
						}
					}
				},
				{
					"type": "object",
					"required": ["tileMatrixSetURI"],
					"properties":
					{
						"tileMatrixSetURI":
						{
							"description": "Reference to a Tile Matrix Set on the OGC definitions server (http://www.opengis.net/def/tms/). Required if the tile matrix set is registered on the definition server.",
							"type": "string",
							"format": "uri",
							"examples": ["http://www.opengis.net/def/tilematrixset/OGC/1.0/GNOSISGlobalGrid"]
						}
					}
				},
				{
					"type": "object",
					"required": ["tileMatrixSetDefinition"],
					"properties":
					{
						"tileMatrixSetDefinition":
						{
							"description": "Reference to a tile matrix set definition following the 2D Tile Matrix Set Standard. Optional for tile matrix sets defined on the OGC definition server; required for custom Tile Matrix Sets.",
							"type": "string",
							"examples": ["http://data.example.com/tileMatrixSets/WorldMercatorWGS84Quad"]
						}
					}
				}
			]
		}
	],
	"definitions":
	{
		"dates":
		{
			"type": "object",
			"properties": {
				"createdOn": {
					"description": "When the Tile Set was first produced",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/timeStamp.json"
				},
				"publishedOn": {
					"description": "When the Tile Set was first made available to the users",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/timeStamp.json"
				},
				"revisedOn": {
					"description": "Last Tile Set change/revision",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/timeStamp.json"
				},
				"receivedOn": {
					"description": "When the Tile Set was received from an external provider",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/timeStamp.json"
				},
				"validUntil": {
					"description": "The future validity of the Tile Set (the Tile Set may no longer be applicable at this date, or that a new revision of the Tile Set is going to be issued)",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/timeStamp.json"
				}
			}
		},
		"geospatialData":
		{
			"type": "object",
			"properties": {
				"title": {
					"description": "Title of this tile matrix set, normally used for display to a human",
					"type": "string"
				},
				"abstract": {
					"description": "Brief narrative description of this tile matrix set, normally available for display to a human",
					"type": "string"
				},
				"keywords": {
					"description": "Unordered list of one or more commonly used or formalized word(s) or phrase(s) used to describe this layer",
					"type": "string"
				},
				"id": {
					"description": "Unique identifier of the Layer. Implemetion of 'identifier'",
					"type": "string"
				},
				"dataType": {
					"description": "Type of data represented in the layer",
					"type": "string"
				},
				"geometryType": {
					"description": "The geometry type of the features shown in this layer",
					"type": "string"
				},
				"featureType": {
					"description": "Feature type identifier",
					"type": "string",
					"enum": [""]
				},
				"pointOfContact": {
					"description": "Useful information to contact the authors or custodians for the Layer | CharacterString  (e.g. e-mail address, a physical address,  phone numbers, etc)",
					"type": "string"
				},
				"publisher": {
					"description": "Organization or individual responsible for making the layer available",
					"type": "string"
				},
				"theme": {
					"description": "Category where the layer can be group",
					"type": "string"
				},
				"supportedCRS": {
					"description": "Coordinate Reference System (CRS)",
					"type": "string"
				},
				"minScaleDenominator": {
					"description": "Minimum scale denominator for usage of the layer",
					"type": "number"
				},
				"maxScaleDenominator": {
					"description": "Maximum scale denominator for usage of the layer",
					"type": "number"
				},
				"maxTileMatrix": {
					"description": "TileMatrix identifier associated with the minScaleDenominator",
					"type": "string"
				},
				"minTileMatrix": {
					"description": "TileMatrix identifier associated with the maxScaleDenominator",
					"type": "string"
				},
				"boundingBox": {
					"description": "Minimum bounding rectangle surrounding the layer",
					"$ref": "../../../ogcapi/common/part1/1.0/schemas/boundingBox.json"
				},
				"date": {
					"description": "Dates of creation, publication, revision, validity and reception of the layer  ",
					"$ref": "#/definitions/dates"
				},
				"styles": {
					"description": "Style used to generate the layer in the tileset",
					"type": "array",
					"items":
					{
						"$ref": "#/definitions/style"
					}
				},
				"stylableLayerSet": {
					"description": "Identifiers of styles that can be used in conjunction with this layer",
					"type": "string"
				},
				"propertiesSchema": {
					"description": "properties represented by the features in this layer",
					"$ref": "#/definitions/propertiesSchema"
				},
				"links": {
					"description": "Links related to this layer. Possible link 'rel' values are: 'dataset' for a URL pointing to the dataset, 'tiles' for a URL template to get the tiles. 'alternate' for a URL pointing to another representation of the TileSetMetadata (e.g a TileJSON file)",
					"type": "array",
					"minItems": 1,
					"items":
					{
						"$ref": "../../../ogcapi/common/part1/1.0/schemas/link.json"
					}
				}
			}
		},
		"propertiesSchema": {
			"description": "Attributes of the features or rangetypes of a coverage. Defined by a subset of the JSON Schema for the properties of a feature",
			"type": "object",
			"properties": 
			{
				"type": { "type": "string", "enum": ["object"]},
				"required": { "description":"Implements 'multiplicity' by citing property 'name' defined as 'additionalProperties'", 
						"type": "array", "minItems": 1 },
				"properties": {
					"type": "object",
					"default": {},
					"additionalProperties": { 
						"description": "No property names are defined but any property name they should be described by JSON Schema. So 'additionalProperties' implements 'name' ",
						"type": "object",
						"properties": 
						{
							"title": {"type": "string"},
							"description": {"description":"Implements 'abstract'", "type": "string"},
							"type": {"type": "string", "enum": [
							    "array",
							    "boolean",
							    "integer",
							    "null",
							    "number",
							    "object",
							    "string"
							]},
							"enum": { "description":"Implements 'acceptedValues'", "type": "array", "minItems": 1, "uniqueItems": true },
							"format": { "description":"Complements implementation of 'type'", "type": "string"},
							"contentMediaType": { "description":"Implements 'mediaType'", "type": "string" },
							"maximum": { "description":"Implements 'mediaType'", "type": "number"},
							"exclusiveMaximum": { "description":"Implements 'mediaType'", "type": "number"},
							"minimum": { "description":"Implements 'mediaType'", "type": "number"},
							"exclusiveMinimum": { "description":"Implements 'mediaType'", "type": "number"},
							"pattern": {
								"type": "string",
								"format": "regex"
							},
							"maxItems": { "description":"Implements 'multiplicity'", 
								"type": "integer",
								"minimum": 0
							},
							"minItems": { "description":"Implements 'multiplicity'", 
								"type": "integer",
								"minimum": 0,
								"default": 0
							},
							"observedProperty": {
								"type": "string"
							},
							"observedPropertyURI": {
								"type": "string",
								"format": "uri"
							},
							"uom": {
								"type": "string"
							},
							"uomURI": {
								"type": "string",
								"format": "uri"
							}
						}
					}
				}
			}
		},
		"tilePoint":
		{
			"type": "object",
			"properties":
			{
				"coordinates": 
				{
					"type": "array",
					"minItems": 2,
					"maxItems": 2,
					"items": {
						"type": "number" 
					}
				},
				"tileMatrix": 
				{
					"description": "Tile matrix identifier",
					"type": "string" 
				}
			}
		},
		"style":
		{
			"type": "object",
			"required":
			[
				"id"
			],
			"properties":
			{
				"id":
				{
					"description": "An identifier for this style. Implementation of 'identifier'",
					"type": "string"
				},
				"title":
				{
					"description": "A title for this style",
					"type": "string"
				},
				"abstract":
				{
					"description": "Brief narrative description of this style",
					"type": "string"
				},
				"keywords":
				{
					"description": "keywords about this style",
					"type": "array",
					"items":
					{
						"$ref": "../../../ogcapi/common/part1/1.0/schemas/keyword.json"
					} 
				},
				"links":
				{
					"description": "Links to style related resources. Possible link 'rel' values are: 'style' for a URL pointing to the style description, 'styleSpec' for a URL pointing to the specification or standard used to define the style.",
					"type": "array",
					"minItems": 1,
					"items":
					{
						"$ref": "../../../ogcapi/common/part1/1.0/schemas/link.json"
					}
				}
			},
			"examples":
			[
				{
					"id": "night",
					"title": "Topographic night style",
					"links":
					[
						{
							"href": "https://example.com/api/1.0/styles/night?f=mapbox",
							"type": "application/vnd.mapbox.style+json",
							"rel": "stylesheet"
						},
						{
							"href": "https://example.com/api/1.0/styles/night?f=sld10",
							"type": "application/vnd.ogc.sld+xml;version=1.0",
							"rel": "stylesheet"
						},
						{
							"href": "https://example.com/api/1.0/styles/night/metadata?f=json",
							"type": "application/json",
							"rel": "describedBy"
						}
					]
				},
				{
					"id": "topographic",
					"title": "Regular topographic style",
					"links":
					[
						{
							"href": "https://example.com/api/1.0/styles/topographic?f=mapbox",
							"type": "application/vnd.mapbox.style+json",
							"rel": "stylesheet"
						},
						{
							"href": "https://example.com/api/1.0/styles/topographic?f=sld10",
							"type": "application/vnd.ogc.sld+xml;version=1.0",
							"rel": "stylesheet"
						},
						{
							"href": "https://example.com/api/1.0/styles/topographic/metadata?f=json",
							"type": "application/json",
							"rel": "describedBy"
						}
					]
				}
			]
		}
	}
}