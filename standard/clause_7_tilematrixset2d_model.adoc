[[tilematrixset2d-model]]
== TileMatrixSet2D model

[[tilematrixset2d-requirements-class]]
=== TileMatrixSet2D requirements class

Requirements class tilematrixset2D establishes how to describe a TileMatrixSet for a two-dimensional tile space. It is expected that tile matrix sets are defined once and that servers or encodings using or distributing tiles will declare the usage of a tile matrix set by linking to that tile matrix set. The identifying URI for this class is http://www.opengis.net/spec/tilematrixset/1.0/req/tilematrixset2d.

include::requirements/REQ_tilematrixset2d_model.adoc[]

[#img_tilematrixset-uml-model,reftext='{figure-caption} {counter:figure-num}']
.TileMatrixSet UML model
image::figures/6.png[TileMatrixSet UML model]


<<parts-of-tilematrixset-data-structure>> defines the structure of the TileMatrixSet.


[#parts-of-tilematrixset-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of TileMatrixSet data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| identifier

Identifier | Tile matrix set identifier ^g^ | ows:CodeType, as adaptation of MD_Identifier class ISO 19115 | One (mandatory)
|
title ^a^

Title | Title of this tile matrix set, normally used for display to a human | LanguageString data structure, see Figure 15 in OWS Common [OGC 06-121r9] | Zero or more (optional) Include when available and useful

Include one for each language represented ^f^
| abstract ^a^

Abstract | Brief narrative description of this tile matrix set, normally available for display to a human | LanguageString data structure, see Figure 15 in OWS Common [OGC 06-121r9] | Zero or more (optional) Include when available and useful

Include one for each language represented
| keywords^a^

Keywords | Unordered list of one or more commonly used or formalized word(s) or phrase(s) used to describe this dataset | MD_Keywords class in ISO 19115 | Zero or more (optional)

One for each keyword authority used
| bounding‌Box

Bounding‌Box | Minimum bounding rectangle surrounding the tile matrix set, in the supported CRS ^b^ | BoundingBox data structure, see subclause 10.2 of OWS Common [OGC 06-121r9] | Zero or one (optional)

Deprecated
| supported‌CRS

Supported‌CRS | Reference to one coordinate reference system (CRS) | URI type | One (mandatory)
| wellKnown‌ScaleSet

WellKnown‌ScaleSet | Reference to a well-known scale set^e^ | URI type | Zero or one (optional) ^c^
| tileMatrix

TileMatrix | Describes a scale level and its tile matrix | TileMatrix data structure, see Table Table 2 | One or more (mandatory) ^d^
4+|
^a^     The multilingual scoping rules in subclause 10.7.3 of OWS Common [OGC 06-121r9] SHALL apply.

^b^     Informative. boundingBox SHOULD NOT be used to calculate the position of the tiles in the CRS space; please use topLeftCorner of the corresponding TileMatrix instead. If data is not available for all tiled space, TileMatrixSetLimits will declare what the tiles have data (see section 7.2).

^c^     When a tile matrix set conforms to a well-known scale set it can reference it by its URI. If used, the well-known scale set SHALL be consistent with the supportedCRS and with the scaleDenominators of the tileMatrix parameters.

^d^     Commonly more than one. Each tileMatrix of a tileMatrixSet SHALL have a unique (different) scaleDenominator.

^e^     Some possible values are defined the in Annex C.

^f^     If no Title is specified, a client may display the Identifier value instead.

^g^     TileMatrixSet identifies SHALL be unique (different) for each TileMatrixSet of a server.
|===
 

[#parts-of-tilematrix-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of TileMatrix data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| identifier

Identifier
 |
Tile matrix identifier ^c^
 |
ows:CodeType, as adaptation of MD_Identifier class ISO 19115
 |
One (mandatory)

| title ^a^

Title
 |
Title of this style, normally used for display to a human
 |
LanguageString data structure, see Figure 15 in OWS Common [OGC 06-121r9]
 |
Zero or more (optional) Include when available and useful

Include one for each language represented ^d^

| abstract ^a^

Abstract
 |
Brief narrative description of this style, normally available for display to a human
 |
LanguageString data structure, see Figure 15 in OWS Common [OGC 06-121r9]
 |
Zero or more (optional) Include when available and useful

Include one for each language represented

| keywords^c^

Keywords
 |
Unordered list of one or more commonly used or formalized word(s) or phrase(s) used to describe this dataset
 |
MD_Keywords class in ISO 19115
 |
Zero or more (optional)

One for each keyword authority used

| scale‌Denominator

Scale‌Denominator
 |
Scale denominator level of this tile matrix ^g^
 |
Double type
 |
One (mandatory)

| topLeft‌Corner

TopLeft‌Corner
 |
Position in CRS coordinates of the top-left corner of this tile matrix
 |
Ordered sequence of double values ^b^
 |
One (mandatory)

| tileWidth

TileWidth
 |
Width of each tile of this tile matrix in pixels
 |
Positive integer type
 |
One (mandatory)

| tileHeight

TileHeight
 |
Height of each tile of this tile matrix in pixels
 |
Positive integer type
 |
One (mandatory)

| matrix‌Width

Matrix‌Width
 |
Width of the matrix (number of tiles in width)
 |
Positive integer type
 |
One (mandatory)

| matrix‌Height

Matrix‌Height
 |
Height of the matrix (number of tiles in height)
 |
Positive integer type
 |
One (mandatory)
4+|
^a^    The multilingual scoping rules in subclause 10.7.3 of OWS Common [OGC 06-121r9] SHALL apply.

^b^    CRS will be inherited from the supportedCRS parameter of the parent TileMatrixSet. The order of these axes shall be as specified by the supportedCRS. These are the precise coordinates of the top left corner of top left pixel of the 0,0 tile. See Figure 1.

^c^    This TileMatrix identifiers SHALL be unique (different) within the context of the parent TileMatrixSet. Many applications use a correlative numeric value as an identifier. Other alternatives are a rounded scale denominator or a rounded pixel size. It is recommended to avoid repeating the TileMatrixSet identifier as part of the TileMatrix identifier.

^d^    If no Title is specified, client may display the Identifier value instead.

^e^    In XML schemas ows:PositionType data type is used. See OWS 2.0 schemas (owsCommon.xsd).

^g^    The pixel size of the tile can be obtained from the scaleDenominator by multiplying the later by 0.28 10-3 / metersPerUnit. If the CRS uses _meters_ as units of measure for the horizontal dimensions, then metersPerUnit=1; if it has degrees, then metersPerUnit=2p__a__/360 (_a_ is the Earth maximum radius of the ellipsoid).
|===
 

NOTE: It may be desirable to define a tile matrix set with some general-scale tile matrices in one CRS (_e.g._, CRS:84) and with detailed-scale tile matrices in a different CRS (_e.g._, LCC projection). However, this standard does not allow mixing CRSs. Each tile matrix set declares a single CRS.

NOTE: The width (matrixWidth) and height (matrixHeith) in tiles of each tile matrix is explicitly given, so the range of relevant tile indexes does not have to be calculated by the client application.

NOTE: The bounding box of a tile matrix is not supplied explicitly because it can be calculated from topLeftCorner, tileWidth, tileHeight and scaleDenominator.

[[tilematrixsetlimits2d-requirements-class]]
=== TileMatrixSetLimits2D requirements class

Requirements class tilematrixsetlimits2D establishes how to describe a TileMatrixSetLimits for a two-dimensional tile space. It is expected that tile matrix sets are defined in a general way (globally, if possible). Data structured in tiles could only be available in a region of in a subset of scales. This data structure allows for the declaration of a limited coverage of a tile matrix set. The identifying URI for this class is http://www.opengis.net/spec/tilematrixset/1.0/req/tilematrixsetlimits2d.

include::requirements/REQ_tilematrixsetlimits2d_model.adoc[]

[#img_tilematrixsetlimits-uml-model,reftext='{figure-caption} {counter:figure-num}']
.TileMatrixSetLimits UML model
image::figures/7.png[TileMatrixSetLimits UML model]
 


[#parts-of-tilematrixsetlimits-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of TileMatrixSetLimits data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| tileMatrix‌Limits

Tile‌Matrix‌Limits | Indices limits for this tileMatrix | TileMatrixLimits data structure, see <<parts-of-tilematrixlimits-data-structure>> | one or more (mandatory) ^a^
4+| ^a^       Multiplicity SHALL be the equal of inferior to multiplicity of tileMatrix of this tileMatrixSet. Each tileMatrix identifier shall be mentioned only once in this TileMatrixSetLimits. If a tileMatrix identifier is not mentioned, it should be interpreted as a tileMatrix that is not available.
|===
 

[#parts-of-tilematrixlimits-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of TileMatrixLimits data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| tileMatrix

TileMatrix | Reference to a tileMatrix identifier | ows:CodeType, as adaptation of MD_Identifier class ISO 19115 ^a^ | One (mandatory)
| minTile‌Row

MinTile‌Row | Minimum tile row index valid for this layer.
 |
Non negative integer type ^b^
 |
One (mandatory)

| maxTile‌Row

MaxTile‌Row
 |
Maximim tile row index valid for this layer.
 |
Non negative integer type ^c^
 |
One (mandatory)

| minTile‌Col

MinTile‌Col
 |
Minimum tile column index valid for this layer.
 |
Non negative integer type ^d^
 |
One (mandatory)

| maxTile‌Col

MaxTile‌Col
 |
Maximim tile column index valid for this layer.
 |
Non negative integer type ^e^
 |
One (mandatory)
4+|
^a^    SHALL be an identifier to a tileMatrix section of this tileMatrixSet.

^b^    From 0 to maxTileRow.

^c^    From minTileRow to matrixWidth-1 of the tileMatrix section of this tileMatrixSet.

^d^    From 0 to maxTileCol.

^e^    From minTileCol to tileHeight-1 of the tileMatrix section of this tileMatrixSet.
|===
 

[[tilematrixsetlink2d-requirements-class]]
=== TileMatrixSetLink2D requirements class

Requirements class tilematrixsetlink2D establishes how to describe a TileMatrixSetLink for a two-dimensional tile space. This data structure allows for a dataset declaring the use of a tile matrix set defined elsewhere and, if needed, a limited coverage for this tile matrix set. Each tiled dataset in a dataset collection should declare the use of a tile matrix set using this data structure. The identifying URI for this class is http://www.opengis.net/spec/tilematrixset/1.0/req/tilematrixsetlink2d.

include::requirements/REQ_tilematrixsetlink2d_identifier.adoc[]

NOTE: To determine if two resources or datasets use the same TileMatrixSet, compare their TileMatrixSet identifier. Alternatively, compare TileMatrixSet definitions for an equivalency (a simple calculation can be performed to verify whether or not two given tile matrices are aligned).

 
include::requirements/REQ_tilematrixsetlink2d_model.adoc[]

Linking to the TileMatrixSet URIs defined in the Annex D in an OGC schema repository or in an OGC registry are valid options for TileMatrixSet URIs. If the same TileMatrixSet is externally available in more than one format, it is recommended that the format selected is more close to the original document format.

 

[#img_tilematrixsetlink-uml-model,reftext='{figure-caption} {counter:figure-num}']
.TileMatrixSetLink UML model
image::figures/8.png[TileMatrixSetLink UML model]



[#parts-of-tilematrixsetlink-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of TileMatrixSetLink data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| tileMatrix‌Set

Tile‌Matrix‌Set | Reference to a tileMatrixSet | URI type | Values SHALL be a tileMatrixSet identifier in service metadata document | One (mandatory)
| tileMatrix‌Set‌Limits

Tile‌Matrix‌Set‌Limits | Index limits for this tileMatrixSet | TileMatrixSetLimits data structure, see Table 4 | Zero or more (optional) Should be include when the boundary of the data is a fragment of the boundary of the tileMatrixSet ^a,b^

4+|
^a^       The absence of this parameter means that tile row and tile column indices are only limited by 0 and the corresponding matrixWidth and matrixHeight for each tileMatrix of the tileMatrixSet definition.

^b^      Multiplicity more than one allows definition of more than one rectangular areas where there are tiles with data available.
|===
 

[[variablematrixwidth-requirements-class]]
=== VariableMatrixWidth requirements class

This extension provides the necessary support for variable matrix width tile matrix sets.

include::requirements/REQ_variablematrixwidth_model.adoc[]

[#img_variablematrixwidth-uml-model,reftext='{figure-caption} {counter:figure-num}']
.VariableMatrixWidth UML model
image::figures/9.png[VariableMatrixWidth UML model]

In order to make the description of the model more compact, only the tile rows that have coalesced (i.e., coalescence factor larger than 1) will be encoded.


[#parts-of-variablematrixwidth-data-structure,reftext='{table-caption} {counter:table-num}']
.Parts of VariableMatrixWidth data structure
[width = "100%",options="header"]
|===
| Names | Definition | Data type and values | Multiplicity and use
| coalesce

Coalesce | Coalescence factor | Positive integer type ^a^ | One (mandatory)
| minTile‌Row

MinTile‌Row | Minimum tile row index valid for this layer | Non negative integer type ^b^ | One (mandatory)
| maxTile‌Row

MaxTile‌Row | Maximum tile row index valid for this layer | Non negative integer type ^c^ | One (mandatory)
4+| ^a^    Shall be more than 1. Rows with Coalescence factor of 1 shall not be described here.

^b^    From 0 to maxTileRow.

^c^    From minTileRow to matrixWidth-1 of the tileMatrix section of this tileMatrixSet.
|===
 
include::requirements/REQ_variablematrixwidth_coalescence1.adoc[]
